namespace day25 {
  const inputs = {
    ex: `v...>>.vv>
.vv>>.vv..
>>.>v>...v
>>v>>.>.v.
v>v.vv.v..
>.>>..v...
.vv..>.>v.
v.v..>>v.v
....v..v.>`,
    in: `>.>v.v.>...>v.>>v.>..vv>>v>v....>.v..>v..v>>>>..>>.....>....>..vv..v>.v.vv.>v......>>.>vv>vv..v>..v......vvv..v...vv.>...vv...v>..>..>v>.>.
....v>.>..v.v>...v.>...v..v.>.>>>..v>>..vv>.v....v..v...>>>..>...v....v>>.v>>.v.>vvv..>...>...v..v>..v.v..v...vv.>.>vv.>.v..>>v...v.>>>v..>
...v.>vv.>.v..>..v....>vv.>...v.vv>vv..vv.vv...>>..v>vvv..vv...............vv...>v>>v..>.v.>vv...>>...v>v.v.>>>.>....>.>.v....>.>v.>>..v.v.
.....vv.vv....v>vvv..v.v>>v.v..vv>.>..v........>>...>.>>>....>>.v>.v..>v>..v...>>........v>>>v>.v......vv..vv...>..>.>.>vv>v>vv...v.vv>>v..
..vv.v..>.vv>.v.vvvv>v..>v..v>.>>......v...v.>v>>>..>.v...>.v..>v..v>.>...v..v>>.vv.vv..v...>.....>.......v..v.>..>...>v.vvv.....>v.v..>>.>
v.v.>.v.>.v..v.v>v..v.>.>vv...>......>...>..>.v>..v.v..v.>...>.v.>>.v.......v>vvv>.v..>>>..v..>.>>v>v>>v.v.......>...vv..>..>v......v..v...
v.>>vv>v..>.>.>.>..v>>v.v>vvv...v.>v...>..>vvv.v.>.>.>.>.....v>..>..v.vv>v.>.v.v>.v>vv...v...>.v.v...>v.>>.>v..v>v.>.>...>v>.>..>>>.vv.v.>>
..>>.>>.v.....v>.v.v......v>>>>.v.>>.v.v>v.v>>.>>.>....v>.v>>>>..vv..>>....>>.>...vv.>v>vv..v...>.vv.vv....vvv>.v.>....>v.>.v...v.v>vv..>.v
vv.>..v>v.>v.vv>..v.v..>>>>>v....v.vvv>>.>...>vv..>.v..>...>..v..>>v>.>..>v..>...>..v>..vvv>..v...v....>v..vv......vv.v>.v..v>....>...>...v
vv>v.v.vv.>>.v.>v....vv..>>....vvv.>..>>....vv..>v>...vvv.v.vv>>.>.vv.>.>.>.>.....>v.v>vv.v.>.>v.>>v>...>..>v>..>vvvv...v.v....v>.....>....
...>.v.>v.>...v.>v..vv.>..v.....>>v>>>>v.>..v.>.vv.>>..>.>v.>>v...>.v..v>>v..v>.v.>>v>>>..v>..vv..>.>>v.v>v..>.>vv..>...>v..v........vvv.>.
.>..>v.>>...>vv.v>v.>v>......>.>>>.v...v.>>...>.vv.v..>vv>v.>>.....>>v>v>v...v>...vv...>v>>..v..>.>.....v>...v........>.vv.>>v...v>.v.>v...
v...>.vv.......vvv...>>.>>vvv...v>..>v.>>vv.>...>v..>..vv.>v>v>v>.v>..v>v..>..>v.>v>>....v.>..v.>v>.vv.>v.>vv>...v>vv>.v.vvv...>.v>v...v..>
.v...>>.v>.>.v.vv.v.>....>.v.v>>..>.>.v>>v>vvvvvv.vvv>v.v.v..>v>.vv..>...>vv.v.>...v.vv.v.>vv.v.v.>...v>..>..v>..v>v>>v.v..v.>vvvv>v.vvv.v.
>v.v.v.vv>v..v>v.v...>>vvv...>.v.vv...>.v..vv.vvv.....v..>..>...>.......v>.>v.v.v..>.....vv...v.......>>>v>..>>.......v>...>.>vv.>.>>v>..v.
.vv.vv.>>..>.v..v..>.>...>>.>>v.>.>..>..>.>.vv.v.>.>v.>.v..v..vvv..v>.>.>.>..v..>v..>...vv..vv...>..>>v>..>>v.....>vv.>..v>.vv>v.vv....>v>>
>>.>>>.>.vvv>...v>vv.>.v....v.>>..>vvv..>>.v...vv.>..>.v.>>.v>..>>.vv..>.>>..>vv>>v>...>vv.>.>>>...>.>.>>.v>v>.v>vv>.v.vv...>v>v.vv.>>.vvv.
>v.>.v..v.vv..>v.....v.>vvv.>.>>vv..>>.vv..v.v>.>..v>v...>.>.v.>vv>v...v.>v.v...>v.v...v>.v.>..>.>v.>v...v..v..vv.v.v.>vv>>.>.>v.v.>.>v>...
..vv>.>.v>vvv.>....>...>.>>>.>.>v>v..>.v....>v...v>..>....>>>v>.v>.v.v....v.>>v>>v>>.>v...>>.vv..>..>..>..>>.>...v.>v.v>>.>v...>..>v.>.....
>v.v.v...>>>vvv.>>.>>>>>.vv>.>v....>>.....>v.vv.....>....vv..v.v>.v....v>>>.v.....v...v.>.>>v>....v>.vvv..>v.v....>...vv..vvv>.....v....vv.
vv.v>>v....v.>.>>v.v.v.......v.>...>.>>vvv.v.v..>....>v.>v.>>>vv>v>..>.....>...>>>.v.>..vv>.v..v..v.>.....>.v.v...>..v.v.....>...>>>...>.v>
v.>.v>.....vvvv...>.vvv.>.vv..>..>>..vvv.v...v.v.>>.>v>.>v....v.>>.>>....v..v>.>...>>..v.vvv..>.v...>.>v...v..>.v...>..>..v.>.v>..v..>>.>..
..v>v.v...>vv..>>.........vv..>v....v.>vv.>>.v..v...>...v>v.v...>>>>.>.>.vv...v>>vv>>.....>>.vv.vv>v>vv..vv.>v.v.....>.vvv>.......>...>v.v.
..v....vvv>.v.v>....v..vvv..>>v>....v.v>.v.>..>v...>..v>>..>.>...v..v..v.vv>.>..>..>vv..v.v>v>..>..vv>>.vv>.v>v.>..v>..v.vvv>>>>.v...>v>..>
.vv.vv.vv...>.v>v..vv.>.......>.>>v.v.>>v>..v.v.>....v>...>..v>...v.vv>.v..vv......v>vv.v.v....vv...>...>v>...>...v.....>.v.v.v......>>v.v.
>..v.v..v>.>v..>v>..>....>..vv...v.>vv.....>v>...>.....v>>.vv.vv.v..>.>v..>v..>.>vv...>>.>>>.>>>...........>.>.v.>v>>...v>v.>.vvv>v>v.v.v..
.v..>>..>v>..v.v....>..vv>vv.v..>v..v..v..v...vvv>>v>vvv>.v...v.>v.v>vv>v.v>..v.v..v>>>v..vvv>>..v..>....v...>.>v..v.>>>.>.>v......>vvv>...
....>vvvv....v>v.>v.v>>v.....v...vvv>.v....vvvv.>v.>..v>>v>vv.>>.>....v>....>.>v.>.>>>vv...>.v...v.v>vv...v>.vvv>v>.vv.v.>....v.>..vv...>..
.>>vv.>>.>.>..vv>.v>..vvv.....v>.v.>.v.......v.vvvvv.v.>>....>.>.>>>v>...>>>v...v.>>>>>...v>v..>..>...v..>.>.>v.>v>...vv...>..vv.v..v..v>>.
v....v>.....>>>.>v..v.v>>.>vvv..>v>>>.vv>..>.>>v...>..>..v...v>..v.v...>.>v......>>vv>.vv..>.>>>v.v.vvv..>...>.>..v..v....>v...>.>.vvv>.>.>
.v.>>.>...>>v.vvv..v>vv.v.>>v>vv>.>v......v>>v>vv.>.>.vv>.>.>.>.....v>>.v>v>.>v..>..vv..>v>>>>>.>.>v.>...v.v>..>.vv..v>v>..vv>..>.....>>>.>
....>v........>v.v...>v..vv>>.v.>..v..>>v>.....>..>vvv>.vv.v.>.>v.v>.v.>v.>..>v.v>>...>.>.v.>.>v..>>....vvv.>>.>.v.>>v....v>..v>.v.>...>.>v
..v..>..v>.v.>>v....>v.>vv.>v....>v.v.v.>....vv>....v.v.v..v.v.vv...>.>>>.>.>.v>.v.v...v>.>..>.>.v..v...>vv>>v......v.>..>..>>>.....vv..v.>
v.v>v.>>vvvv.>.v>v...v.>.......>v.vv....>>v.v....v....v..>>>>>.vvv.>.>>.v>>.v>>vv.>v>..>.......>.>.vv>..>.>.>>...>.....>>.v.v..>v>v>.>v>v>.
>>>>.v.vv.>...>>.>....v.v>..vv>.vv>>vv.>..vv>.>.v>>...v....v.vvv>v.>.v.vvv.v.v..v.v.v....vv>..>v.....>>>>v>.>v.vv..vv.v.....vv..v>..v.v..>.
>>..v...v.>>>..vv.v..>>.vv.v....>.>>>>>>>v.v.>....v>.v...v>.v>v.>..>.v.v>..v....>...v....>.v>.v>.v>>>.>.>>.v>....>v.>>.....>..vv.>>v>>.>...
v.>>>v......>...>>..vv>>>>v>>v.>v...v>>.v..vv.v.vvv>>v.>v.vv.vv...v>>.>..>v.....>>>.v..vv.>>.>>>..v>>>.....v>..>.>v.v>vvv.v...v>>.>>.>>>..>
.v>..>v>v..v..>v>>v.v...vvvv.v.v....vvvvv..vv.>......>>...v...v.>..v...>vvv..v>v.>>vv.>.v>>.....>v.v..v.>>....v>>vv>.>.v.v>...>.>.>.v>.>v>.
.>.>..v.>.>.v.vvv.v.vv.v>v.v.>..>>.v..v.>.v>.>.vv>>>>...v..v.>....v..>>.vv..>>.>>v.>v.v>.>v.v..>.vv.vvv.vv>...v.v>vvv>.v.>vv>>.>vvvvvvv.v.>
>.>.>vv>>>vv..>>.vv.>..v.v>>>..vv..>v.vv..>>.>>.v....v>..v.>>>vv.v.>.v>.....v..vv>...>vv.v...>...>..>..>>>v....v.vv.>v..>v>....>...>>v>...v
...v........v>v>....v>...>.>v>v>v...>.v>.>.>..>.>.vv.>.>..v.....>v...vvv..v>>..>>>>...vv..v.>>v.vv>v.>...>....>.>..v.v...v..>>v.>.>vv>.v>>.
....vv.>>v.v>vv....>...v...>vv..v.vv>.vvv.>v.>.v.....vv>...v.v.v...>.v.>....v>>.v..>v>.v>.vvv>..>>.vv.v>v>........>.v>.>.>v...v..>.v..>>v>v
v...>..v.>.v......v...vvvv..v.>..vv>>>>v.......>.>.......>.v..>..v>..v..v.>v.v..>>..v>v.>>v..v.vv.vv>.v.>>vv....>...>v.v.vv..v>>..v.vv>.>..
.v.vvv...v.>v>v>.vv>>vvv.v.>.v.vv>v..v.vv.>v>..v.....>.v>v......v..v.v..v....v>>v..vv..>v...>>..v...>..v>v.>v>>v..v..>v....v.v.>v>.v..>>.v>
vvv..v.>....vv.vv.>>...vvvv.vvvv....>>vv...v>>v...v..>.>>...>.v.v....>vv.v.>..>...>.>>v....>.>..>v.>...>>vvvv......>vv>>.>..>.>>v.v....>..>
>v.v...>....>>.>.vvv...>>..v>>....>......>v>.>v..v.>v.vvv..>.>.>.>>.v.v>....>...v>.v>..>.vv..v.>...v>v.>.>.>v>....>vv.>..>>.>...v.>....>.>v
>.v>>>>...vv.v.>v.>v>..>..v...>..>v.>.>...vv.>.>.>...>.>..vv..>v..vv.>....>.v>v>.>v...>...>.>v....v>v...>>.....>.>..>vv.....v>..>...v.>..v.
v....v>..vvv....>..>.v...>....vv.v>.v>..>.vv.>v>..>..>>>vv...v.>vv>...>.vv.v>vv>v>v>....>...>..>vv>>v>....>...vvv>v.v.>.>.vv>.vvv>vv...vv>v
..v..>.v.....v.>.....>vv.>.vv>v..v.>..v>....>.>>..>>>v>.>v>>....>vv>>.vv.v.v.>vv>.>.v...>>>..v>...>v>.v...>>.vv....v..>.>..v.v...v>..v>v.>>
....>v..v..v>..v>v.....v..>.v.>v.vv>.v>>>>....>v.vvv>.....v..>..>.v>>..>.vv.>.v.v>...v>>.v.v>v.>..v>vvv>>>>..>.v.>..v.v....vv>v.>>.vv>.>..v
vv>.....v...>.>>v>.vv.>v>.v..vv>......v.v.>..v.....>v>.>v.v>v.v.....>vv......>..>.>.>>>...>v>>....>>v..v.v>..>vv.v...>.>>..v.>>v>.>.......v
.v..v....>....>>>.v..v...>vv.v>.>.>v.>.v>vvv>...v...vv>>.>v>.>..>..>v.v.>v>.>.>v.>v......>vv.>v>v.>...>>..>vv.v.>....vv>.>>....v>.>..>>>>..
.>.>vv.v>.>>>vv.v>.>..>..v.>.>>v>v..vvv...>>>>.>>vvv.vv.v.>.v.v>.>>.v..vv.>v.>.>......>..>v.>..v...>>.vv>v..v>v....>v>..>..v>v.v>....v>..v.
..>v>>v..>>....>v..v.>>.>.v.vv.>>.v..>...vv..>..>v..>....v.>..>..v.v..>v..v..v...>.v..>>v...>.v>.vv..v.vvvv>.>>>..>.>..>>>.>..>>v>....>.v.>
...v>vv>...>>...v.>>>...>vv>v>v..>....>v..>.>..v..v>...>.>v.vv.....v..>v.v>....>.......v>...v.v......vv.>..v.>>>v>v.v.vvvvv.>....vv>..>....
>..v.>>>.v>>v..v..v....v>v..vv>...v.vv.v>vv...>..>.>v>..v>>.>>v>v..>..>.>....v>.>v>>vv.v>>>.....>>....>.v.v>.>.>>>....v.>.v>v>.>>>..v..>.>>
>v>v.>...>v.......vv>............>......>>..>v>>.>v.v.vv..v>..>.v.v>v>..v...>>>.>vv>vvv..v.....>>.>v..>.v.>>v>>>v.v...>...v.>v..v..>..v>.v>
.v...>..vvv...v.vvv...vv>>..>v..v.v...v.>..v....v...v.v...>v....>..>.vvv.vv..v.>v.>.>..>..>>vvvv...v..v.>v..>.v.v.v..>v.....vv..>vv>.>...v.
>.>..>..v...v.>...v>>..v.....>v....v>v.v>.vvvv....v>>.v>...v.>....v>v.v>>>.>...v>vv>..>.....>.v>..vv.v>>>v.>>>.>v.vv...>>......v>..>.vvv>.>
.>......>v.vv.v.vv.>>>>v>.>v>.v...vv...v>.>v..>.v.v......>.v...v..v>>.>vv.vv.v..v.vvv>>v>..vv.v>..>..>v..v>>>>.>...>..v..>>>..vv.vvvv..v>v.
v>.v..>.......>vv.vvv....v>>v>>v..vv>..v.>v..>..v>v..>.>v....>v....vv..>.....>...vv.>...vv..>>v...>..v.....v.>..>.>.>>v.v.....>.>.>vv..vv.v
..v..v.v..>v>....v>>...v...>...v>.v..>vv>.vv.vv....vv...vv.>.v>>>..v>.v.>>vv.v.v>.>>>>>v..v>v>>.>.v..v.v.>v.>v>..v>>.vv>>..>>.v..>v>v.v.v.>
.v..>v.>>v..>.v>vvv.v>>..v>v.>..>..>v>.vv.v.>...>.v>>>..v....>.>.>>.v.vv>>>>.v.......>>.>>v>......vv.>>.>...v.v>...v..>..v.>v.vv...v..>>v..
>..>..v..v>>>v>..v>>>.>......v>....v.v.v.>>>.v..>vv..>.......>.v.>.....v.>vv>v>>...vv>v..>>.v...>.>v>>>v>vv.vv.>v.>...v>.>.>.vv...>>..v....
..>..>..v.>>v.v.>..>v>v.>.vv>...>....v>v.v...v.vv.v.>>>v>v>.v.v.....>>..>..v>...>>...vv......>>>...v>>>v>..vv>>>vv.>..>>vv>.......v...>v...
.>.v.......v>v.>v....vv>v>.>.v>>..>v>.>>vv...v.....>.v>>.>v>.>.>>>>vv>..v.v.>>>.>.>>.>.v.v...vv.v.v..>.>>v...>.v>>>...v>vvv.v.......v.>.v..
v>vv.>>>v.>.>...v>>>...>.v.>..v....>...>..v.v.v.>v.v..vv..>..>>>v>.v.>.>..v>.>.v.v..v.>v....v>>.....>>..>vv....>.>>>>.vv>..>.v>>v>v>..v..vv
>>v..>...v>>....>v......vv>..>v>v...>...v.v>>v>...vvv.>>..v.....v>>v>.v.v>v...>.................>.>...>.>...vv..>..v.>..>..v.>>vv..>.>.>>>v
v>.v>>v>>..v.vv.>v...>>..>.vv>..v...>>>...v.v.vvv.>>>.>>..>v.v.>v..>..v.vvv..v.vv....v>.>>vv.>..v..v>v...>.>..>......vv>.>..>v.>>>.v>>....>
>.>>..v..v.......>........>..v.>.vv.vvv.....>.....>..v..v.>>..>>.>>..>>.v..>>>..v.....>vv>.>vv>...>.>.v..v.v.v.>>v.v..v>>>v>v>vvv.v.v..>v>>
...v>v>>...vv....>...v..>.v.>.....>...>....>..v.>.vvv>.v>v>...>vv>...v..v>>.....>.vv..>>v.....v>>>.v>v.....v.v..v>vvv....v.v>>vv.v.....v..>
>v>>.>.>.>vv...>.>v.>v.>.....v..>vv..v.>v.>.>vv>..vv..v.>.>vvv.....>v.>vv..v..>...>.>..>>.>..v..v.>...v>.v.v.v..>v.vv>.>...>v>v.v>vvv>>>..>
v....v...vv.v>....>v.>v..v..vvv..vv.v..>..vv>>.>...v.>vv...v>.......v.......v>>>>>vv..v.>v.v....>v>v.vvv.>.v.>.vv.v....v..v.>vv....>>>v.v..
.vvv.vv>vvv>.v>..v.v.>.v..>v..>v..v>>vvv..vv.>..>....v>v.v.>..>..v...v..>.>...>v...v......>v.v.>vv>..vv>>>v.>.v...v..>vvvvv..v..vv.>..v.v.v
v.>..>v.v.>.v>.>v.v.vvv..>v>>.....>>>vv..>.....v.>..>.>.>.>v..>..v..>>.v....>...>>....>.v.v.>>v>>v.v......v>..vv.v.v>>.>v.v>.>.>.......>...
>.v.......v..>.>>.....vv>v..v.>..v.v...vv>.....v.>v.vv..v.....v>vv...v.>>.v.v...>...>>vvv>.>v.....>....>....>.>v..vv.>v...vv.v.v..vv.>.v.v.
v.v....v>vvv>vv.vv...v..vvvvv.v>v..>..>..v>>...v>>.>v.>>.>>>>>..v...>...>.>..>vvv..>>...>...>..vv>>>..v>>.>..v>.....v..v>vvvvv.>..v.v>.vv.>
>>.vv.vv..>>..>v..v.v>.v..>>.>>v.>>v.v.>>.v>.>>v>..>vvv.>>v.>...>.>>>v.>.....vv>.....>.>..>...>.>....>..v.v..>.v.v.>v.vv.v.>>v..>.vvvv>v>.>
v..>vv...vvv>.v..v.>vv>..>.v.>v.v>....>>...v.>v.>>>.>.v>>.>..>.....>..>>.v>vvvv.vv>v..........>.>>>vv.>.v..v.v..v..vv>v>v..v.v.....>..v.>v.
v>v.v>v>vv..>>vvv..v>...>v.>.v.>>...>v....>.v>.>v>...>>>>..>v.>>..vv.>....>>>..>...>>.v.>>>..>v...>vv........>....v.v..v..>v>>>>>..v..>>...
>>.v.>.>>vvv>>.v>v.>v>...v.v...>...>>v......>.>.>>>.>v>....v...>v..>>..v>...>.v>>.v..v>>v.v.>>.>>v.>..vvv>..v....>>.v>..>v.>...v...vv..v...
vv..>...>v>>v..>..v>..>.v.vv..>...>>.v.vvv>v>.vv..>.v.>>.>.vv.>...v....v.>>v.v.vvvv..>.v.......>.v........>>.vv.v.v..>..vv.>..v...>..vv.>v.
v.v.vv..v>..v.vv..>>v>v.>v..v>...>vv>.>>v.>.>>.v...v>...>.vv.>...vv...v.......>>..>.v.v..>>.....>.......>...v...v>.v..>vv..v>.>>vvv.>..vv.v
...vv.vv>.v.>.v.vv>.>.....>>>.vv.>>v.v>...vv>.v>.>...>..>vvv>....>v........vv...>...>v>>.v...>.vv.v......vvv>..>..>.>.v>.>.v....v...>>>.v.v
...v>>.v.....v....>v>...vv>>..vv.vv>>vvv>.>>>>....v...vv.>v..>vv.v.>>>vv.v>.....>.>......>v.vv>>.v.v..>.vv>.>v...>...>...v>>.v.vv....>...v>
.>>.vv..>>>>..>vv....v.>v.>..>..>>..>.>v>.v>>.>.v..>..v...>.v......v...v....>>.>.v.....v.v..v..v...v..vv>v..v...>...>>..v.v.>vv..v>vvv.....
vv.>.>.v.v.......>...vv>vvv..v...v.v...>v..>....>.>>>...>v...>v.>>.vv....vv>>.....v..>v.vv..v...v....>.v.>>...v.v.>>>.>v.>.>v....v.vv....>v
>>v..>>..>....v...v.v.>..v>v..>>v.>vv..v>.v..v.v.....v.>>.vv.>.>>.>.>>..v..v..v.>..>>.>...>.v>>>>v.v...v..v..>>....>>>v.>>v.v...v.>v.vvv.vv
v>>v.....v..v.v...v>.v...v>v.....>>..>.v.v..vv.>.>v..>v>>.>.v...v.v.>vv...v.>.>>.vv...>v>.>>>>.>>vv.....>vv>...v..>v>..>....v........>...vv
....v..>>...>v.>>..>.v..>v...>.vvv.>......v....v.......>vv>v....v>>>>>..>v>...>v>.>.>vvv.v.>>>..>....v>..v>.vv....v>>>>>.>>.>.>.v>>.>..vvv>
.>v>...v>v>...>...>.v..>v>>.>>..v>.>.vv>..v.>..v..>>.v..vv>.>..>.v.>>.>v>>v.>....v.>vv>.>>.v.>.>.v...>>>vvv..v>>.vv..v...vvv...>...>.>..v..
.>..v.vv..>.>...>...>.>.vv...>.>.....v......v.vv>vv..vv...>.>..>.>>v..>>v...v.vv...v>...>vv..>.v.v>>v.>.vv..>..>vv>..>..>....>..vv>.>...>.v
>.>.>>....>v...v....>v...v.v...v..vv.>......>>.>v>>v..>vvvv....v.>>vvv>v....>vv.v.vv....vv>>.v....>...>>..>>v.>.>v...v.>v>v>.....>>vv.v.>..
v>.v.>..>v.>>..v.v..vv.>.vv>.v..v...>v...>vvv.>....v..>vv>.v>.>.v..v>>..>vv.vv.>..vvvv>...v>..v..>..>..v>>......>v..v.>>.vv.....>.>...v>vvv
>v.v>.v>>>vv....>.>v.>>.vvv.v.>....v>vv.>v.>v..vv>..>...>>...>vv.>vv...v>........>.>v>>>>..>v...v.v>>>vvvv>>.v>v.>...v>..>>.>.>vvv.vv.>vvvv
..>v>vvv>vv..>>.v>v.v..v.>v.v....v...vvv..>.>.vv>.....>>v.>...v.>>.vvv>>.vv>..v..>...v>>>>.v.v.>.>>>......v.>>.v.....v>>.>..>v.v...v.>vvv>.
>v.v>.v>..v>vv.>>.v....v..>...>>.>v...>v..v>.v>v>v..>vvv>v.vv..v....vv.....vv.vv.>>>.vv>....>v..>>.v>.v.>>.>..>.......>v>>>>...v.>..v.vv>v>
vvv.>..v.>v>.......v>>.>.v>.vv.vvvv>.....>v...vv>.>vv>......>.>.>v.v.>..>....>v>v.vv>.v.>..v>v>...v>>vvv.vvv>v.>.>.>..vv.vv..>v>>v>.>.>.>..
v>v.....>vv>>..v>v>......>>>...>v...>v>.v.......vv....>..v>..vv>>v>..v......vv..v.>v>>v..>.v.v..v.>.v.v>...vv...v>...v>v>>>v>>.vv.>>..>.v.v
v.vv.v>v..>.vvv>.>...vv>..v.v..v>vv>>v.v>.v>vvv.>...>..v>..>.>.>.>>...v.v>......>vv>>..v.v>v.........>v..>..v>vvvv>vv..v>..>.>....>>v.>v>v.
>.>>.>.vv...>.vvv>>>>....>vv.>>v>...vv...vv>>>>>..>.v....v>v.>>...>.>.vv.>>.v....v..v>..>>....>v>>>..>....>.v>v...>v>.>v.v>.v..>.......v>vv
.>v..>>v>.vv.....>v..>.>>>v>.>.v..>>....vv.>.v.>v>.>vv>...>...>>..>.vv..>v...>.v.>.....v..>..>.v.>.>>v..v..>v>vvv..v.>vvv.>.>v..v>..>.v.>>.
...v>.>v..>v.>.v>.v>v..v.v>>>>.v.v>v..>v>.v>..v..v.>..>.v..>.......v.v..v.>.>>vv.vvv.v..v.v.v..>v..>vvvv........>vv..vvvvv..v>...v>.>.v.v.>
.v>...v>>v>v>v....v.v>..v>.vv...>...v.v.v..v.>v.v.>vvvv.>>.v..>v..>>v>vv.>vvvv>v>...>...v>>...>vv.v..>....>.>v.v.>>v.vv..>...>v..>v>.>>>>>v
>v>v.v>>v.v..>>..v>..v..vv.....>v.>>...v.v....vvvv..>....>>vv..v>.v>>>v...>.v.v.v..>v..>>....>.v..v..>vv.v......>..v>.v>.v..v>.>.v>...>..>.
>...v.>>>...v>vv.v>.>.v.>>>v>..vvv>>vv..>.>v...>>vv.v..>>vv>....>>...>...vv..>.vv..vvv..v.>..>.v.v..v.>..>v>.>>..>>.>vvv.>..v>>v..>>..v>>>>
>v..>vv>..v...vvv>>.....>.>.>v>..v.vv.v..>>.....>.v.>vv>v.>>v...vv.v>vv..v>..>v>..>>v.....v.v...>....>>>.>>v.>.>..vv.....>>>..vv..>........
>>..>>v.v.v>v....>.>>>v..v...v>..v..>>>.>.>..>...>..v>.vv.......vvvvv.v.v.>vvv>v..>v.>v.v...>v...>v.>v..v>v..v..v.v...>vvvv.>v..vv..vvv....
.v......v.>..>v>>.>>>.>.......vvv>>vv...v....>vv......>.>vv>..vv..>..>...>v....>>>..v.v..vv>..>vv>v>vvvv..v.v..v>..v>.vvv>v..>v....>..v..>>
...>.>..>v..>.v.>.v..v>..v>>.>...vvv>.>>.v.v...>vv.>v.v.>.v..v.v.>..>.>>.>..>v.>>.>vv.v>>.>>..>v>v>.v..>.vvv>v>v.>v..>>.v....>.v>........>>
...>v.>>..>vv>..v>>.v..vv>.v..v...v>.v.v.v..>>v..v..>.>v..>...>..>..>>vv.v>...vvv.v..>v.vv..v.>>>.>.>.....v>......>.v.......v...v>.v>>>..>.
>.>..>.v.>.>v>>>.>.v.>......v..>...>.>vv...>v>..v.v>>vv.>>....vv>..>>.>>..>.v..>>..>v.v>>v>.v.vv>>.>vvvv>v>..v.v>.v...v>...>vvv.v.v>v>v..v.
v.v......v>.>>v.v........v.v.v>.>..>.>..v.>v>.>..v.v..v...>v.....>..>>>>v>>.>...>>.>v.>>.>.vv...v..>.vv>......>vv.....vvv..v>vv..>.>..v>.>.
.>>>.v.vv>......v>.>>.>.vv>...>.vv.>>>>vv.v..>v..vv>v.v..>.v>.v...v.>>.v>>vvv.v......>.v>>....>..v...v..vvv..>v.v>>..>v.>.......>v...>..>..
...>>>.>>.>.v.v>.>.>vv...>...v.>...>v.>...>v>.v.v..>..v.>.>.v..v.vvvvv..v...v.>......v.v>...>v>.>.v>.vv>...>...>.>.>>v...vv.>>.>.v...>>>...
.v..v.v..vvvv>v>....>..v.v..v...v>..>>..v.v>.>..>.....>.v.v>....>..v.v..>..>vv>>.v.v>..vv>.>>v..v.>..>..v...>>>..v>.v>..>.v>.>..>..vvvv.v..
.>v.vv>.>..>.v.v>.>>...>v.v...v.>.>.....>>..v.v.>>>.>..v..>.v>.vvv.v...v>>.v>.>.v.>.>v>v...>...>............v.>v...>....v...>..v...>..v...v
vv>>..>.>..v.vv.>.v.v....>.>vvv.v>>...v>v>v.>>v.vv>...>>..>.>.v>>....v.>...>.v...vv>v>vv.>..v>v.>....>vvv>....v>..vvv..>.>..vv.>>.v.v..v..>
..>....>.vv.>vv.>.v..v.v.v>.v..v.....>.>v.v..>>v>v.>v>>..>v.v.....>>>.....v>>>...>>.v..>v....>..v....>v.v..>>v..v.>>>v.v>.>>..>..>..>...>v.
v>v.v>vvv...v..>>>...v.v>.v>.>..v.>>..>>vvv...v.>v.>v.v>.v...v.vvv.vvv.>...>.....>..vv..>>.>..v..vvv.v.>.......vv.>>...>.>.v..v..>v..v.v>v.
.>.>v>.v.v>.>v>v.>.vvvv.>..vv...v...v.v>.>v.>.v..v>vv>..v.>.>>>v....v..>..>>..>v..>.......vv>>vv.....vv.>>.v.>>v>..>v.vv.....>.>.....>.v.v.
>.v>v....v.v>..>.>v>.v...>>>v>.v..vv..>vvv>..>v..v>vv>>v.>>v>vv.....>.>v.v>vv.>>.vv>v>>..>.v>v>v.>.vv.vvv>>.>..v>>.vvv.v>>.>.vvv.v>vv.v>.>>
>>.v....v..>vvv>>...vvv>>.>..v>..vvv.....v>.v>.v.>...>.............>..v.v....v.v>.vv.>..>v..v....>v.>>vv...v...>v.v..>>....v..v.vv>v..v...>
>v.>v..v.>.v.v.>..>>.>v>.v.v..v.vv.vv.vvvv.>>vv...>v.....v>...>.>>v.>>...>vvvv>.vv>.v....v>v>>>v...>.vvv>..v...v..v>.>>.>>>........>>.v.vv.
.v.v.........v.>>v.>vv.v.v.>vv>>v>>>.vv>v>>v.>>>>v....>>.v..>.v>v>>...v.>.v..>.v>>>..>>v..v>.v.vvv.>v.>..>..>...vv.>>>...vv....vv....v....v
>>>vv.v.>.v>.>vv..>.v.....>...>..>.vv>>v...>.......v...>.>.>>v.vv>vv..v.>vv....v....>.>.v.>v>v..>>v....v.>>...v>>>>v....v>.....vv...v>vv..v
>v.v....>>.>v>.>>v.>..>>>.......v.v.v..>vvvv.>v.>.v.v.v.v..v>.v.>..v>..v>.>>.....v>.>>..>.>>>...>v.>>v..v....>>.>.vv.vvv.>v..>>>....>.v...v
>.>.v.....>..v>vv>>>..>..v.>vv>vvvv...vv....>.>.v>>.>>.>.v..v..........vvvvv.v.v.v..>vvvv.....v.>vvv...>v..>>v>v....>.>..>>..v>>v.>v.vvv.v.
.....v>>>...v..v..>...v.>v.>v.v..>>>..>>v>.v.v>vv>.>..>vv....v>...v>vv>>.....>.v...v..>vv.>v..>.v.vvv.>.v.vv..v...>..vv..>v>>>..>>...v...vv
>v>v.>.v.>vv..v...>.>.>.....v>vv..>>.v...>.v...v..>..v.v..>......>v>>.....>>>v..v.>>v>>v.v>v>.>v.vv.>..v...vvv..>.>>.>....v>..vv.v..>..vv.v
.v>.>>....>>>.vvv.>.vv..>vv..>.v.v.v>.vv..vvv.>..>.vv..vv...v..v.v..>v..>..>v......>>.>v.v.v.v.vv>.......>.>>...v.vv>.>>..v.v>.v.>>.vv.v.>.
v.v>>>.>..>v>v.>>>.v.v>v.v.v..vvv.v>v.>.>>>.>v>v.v>.>vv...v>.>v.v.vv...>.v.v>>>vvvv>.v..>..>v......v..>.>v>.v..>...v>v>.>...v.v>.vv.>v>.v>v
..>>.v>>.v.v.>vv.v...v.....v..>...v..v>.>>>vv.v>>v.>vv.>>>.v...>.>>....>...v....>vv..>v>.vv.>...v..>v..>.>.>.v.vv..v.>...v.v>..vv>.>>......
.v...>>>vv>>v.....v>...>>.>..>...>v>>>v.v.>.>vv>vvv.v>.>..v..v>v..v>...>>>>vvvv..vv>>..v.vv.>vvv....>..v..v.>.v.vv>v>.v>>....>v.v..>>vv>>vv
..v.v>..vv.v...>.>v...v>>v>v.>vv.v..v>>>v>.>.v.vv.>.>v..>>...vv.v..v..v.>>..>>>>>>..>>.v>..v>>>v.v>v>>.vv.>..>.v..v..>..>v.....>v>.vv>>>>v>
...v.....vv..v....v.>...>...v..v...>.>>v..>.vv...vv.>>...v...>>v....v....v>>...>....>v.v..>>.....v....>>>vv>>...vv..>>v..>>...>>vv..>.v.v>>
.>..>...>..v.>..v>>>...v..>>.....>..v.vv.v>>.....>...v>..vv>>>v...>.v>v>v>v.>.>.vv..>>>>..vv...>..>>vv>...>>...v>.>>>v>>....v>..>.>>.>v.>.>`,
  };

  const move = (state: string): [string, number] => {
    const lineLength = state.match(/^(.*)\s/)![1]!.length;
    const eToWs = [
      ...state.matchAll(new RegExp(`\\.(\\S{${lineLength - 2}})>`, "g")),
    ];
    const wToECount = [...state.matchAll(/>\./g)].length;
    state = state.replace(/>\./g, ".>");
    for (const eToW of eToWs) {
      state =
        state.slice(0, eToW.index!) +
        ">" +
        state.slice(eToW.index! + 1, eToW.index! + eToW[1]!.length + 1) +
        "." +
        state.slice(eToW.index! + eToW[0]!.length);
    }
    const nToSs = [
      ...state.matchAll(new RegExp(`(?=v([\\S|\\s]{${lineLength}})\\.)`, "gm")),
    ];
    const sToNs = [
      ...state.matchAll(
        new RegExp(`(?=\\.([\\S|\\s]{${state.length - lineLength - 1}})v)`, "g")
      ),
    ];
    for (const nToS of nToSs) {
      state =
        state.slice(0, nToS.index!) +
        "." +
        state.slice(nToS.index! + 1, nToS.index! + nToS[1]!.length + 1) +
        "v" +
        state.slice(nToS.index! + nToS[1]!.length + 2);
    }
    sToNs;
    for (const sToN of sToNs) {
      state =
        state.slice(0, sToN.index!) +
        "v" +
        state.slice(sToN.index! + 1, sToN.index! + sToN[1]!.length + 1) +
        "." +
        state.slice(sToN.index! + sToN[1]!.length + 2);
    }
    const moveCount = wToECount + eToWs.length + nToSs.length + sToNs.length;
    return [state, moveCount];
  };

  const process = (input: string): object => {
    let state = input;
    let moveCount = -1;
    let stepCount = 0;
    while (moveCount !== 0)
      [state, moveCount] =
        (console.log(`Running step ${++stepCount}`), move(state));
    return { stepCount };
  };

  console.table(
    Object.entries(inputs).reduce<Record<string, unknown>>(
      (acc, [key, input]) => ((acc[key] = { ...process(input) }), acc),
      {}
    )
  );
}
